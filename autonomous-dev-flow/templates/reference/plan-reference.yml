# Implementation Plan Reference
# This file is for reference only - plans are generated automatically
# by the autonomous-planning phase

meta:
  phase: 0
  name: "Foundation"
  design: "docs/designs/2025-12-08-foundation-design.yml"
  created: "2025-12-08"

goal: "One sentence describing what this plan implements"

tech_stack:
  - "Python 3.9+"
  - "pytest for testing"
  - "ruff for linting"

prerequisites:
  - "Python 3.9+ installed"
  - "Virtual environment created and activated"
  - "Dependencies installed: pip install -e .[dev]"

tasks:
  # Task structure: name, objective, test file/code, impl file/code, commit message
  - name: "Calculator addition method"
    objective: "Implement add(a, b) method with TDD"
    test:
      file: "tests/test_calculator.py"
      code: |
        import pytest
        from calculator import Calculator

        def test_add_positive_numbers():
            calc = Calculator()
            assert calc.add(2, 3) == 5
            assert calc.add(10, 20) == 30

        def test_add_negative_numbers():
            calc = Calculator()
            assert calc.add(-2, -3) == -5
            assert calc.add(-10, 5) == -5

        def test_add_floats():
            calc = Calculator()
            assert calc.add(2.5, 3.5) == 6.0
            assert calc.add(0.1, 0.2) == pytest.approx(0.3)

        def test_add_zero():
            calc = Calculator()
            assert calc.add(5, 0) == 5
            assert calc.add(0, 0) == 0

    impl:
      file: "src/calculator.py"
      code: |
        class Calculator:
            """Calculator for basic arithmetic operations."""

            def add(self, a: float, b: float) -> float:
                """
                Add two numbers.

                Args:
                    a: First number
                    b: Second number

                Returns:
                    Sum of a and b
                """
                return a + b

    commit: |
      feat: add Calculator.add() method

      - Implements addition for integers and floats
      - Handles positive, negative, and zero values
      - Full test coverage with edge cases

  - name: "Calculator subtraction method"
    objective: "Implement subtract(a, b) method with TDD"
    test:
      file: "tests/test_calculator.py"
      code: |
        def test_subtract_positive_numbers():
            calc = Calculator()
            assert calc.subtract(5, 3) == 2
            assert calc.subtract(10, 7) == 3

        def test_subtract_negative_numbers():
            calc = Calculator()
            assert calc.subtract(-5, -3) == -2
            assert calc.subtract(5, -3) == 8

    impl:
      file: "src/calculator.py"
      code: |
        def subtract(self, a: float, b: float) -> float:
            """
            Subtract b from a.

            Args:
                a: Number to subtract from
                b: Number to subtract

            Returns:
                Difference of a and b
            """
            return a - b

    commit: |
      feat: add Calculator.subtract() method

      - Implements subtraction for integers and floats
      - Handles positive and negative values
      - Full test coverage

  - name: "Calculator division with error handling"
    objective: "Implement divide(a, b) with ZeroDivisionError handling"
    test:
      file: "tests/test_calculator.py"
      code: |
        def test_divide_normal():
            calc = Calculator()
            assert calc.divide(6, 2) == 3
            assert calc.divide(10, 4) == 2.5

        def test_divide_by_zero():
            calc = Calculator()
            with pytest.raises(ZeroDivisionError, match="Cannot divide by zero"):
                calc.divide(5, 0)

    impl:
      file: "src/calculator.py"
      code: |
        def divide(self, a: float, b: float) -> float:
            """
            Divide a by b.

            Args:
                a: Numerator
                b: Denominator

            Returns:
                Quotient of a and b

            Raises:
                ZeroDivisionError: If b is zero
            """
            if b == 0:
                raise ZeroDivisionError("Cannot divide by zero")
            return a / b

    commit: |
      feat: add Calculator.divide() with error handling

      - Implements division with ZeroDivisionError for zero denominator
      - Clear error message
      - Full test coverage including error case

# Integration tests run after all tasks complete
integration:
  - name: "Full test suite"
    command: "pytest tests/ -v --cov=src"
    expect: "All tests pass, 100% coverage"

  - name: "Linting"
    command: "ruff check src/ tests/"
    expect: "No issues"

  - name: "Type checking"
    command: "mypy src/"
    expect: "No type errors"

# Verification checklist before considering phase complete
verification:
  - "All unit tests pass"
  - "Integration tests pass"
  - "Code lints with zero warnings"
  - "Type checking passes"
  - "No regressions in existing functionality"
  - "Documentation updated"
